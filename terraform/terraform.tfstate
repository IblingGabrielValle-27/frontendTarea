{
  "version": 4,
  "terraform_version": "1.13.3",
  "serial": 9,
  "lineage": "2e20beeb-9f91-43e5-eec3-de040702ab92",
  "outputs": {
    "public_ip": {
      "value": "163.176.193.230",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "template_file",
      "name": "cloud_init_script",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "43ed21e3356d3e3049eaa5d16466deaaff18e868fa4cbde961f6009ce53ce677",
            "rendered": "#!/bin/bash\n# Script de cloud-init para instalar Docker y Docker Compose en Ubuntu 22.04\n\n# 1. Actualizar paquetes\nsudo apt-get update -y\n\n# 2. Instalar Docker\nsudo apt-get install -y ca-certificates curl gnupg lsb-release\nsudo mkdir -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\nsudo chmod a+r /etc/apt/keyrings/docker.gpg\n\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list \u003e /dev/null\n\nsudo apt-get update -y\nsudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# 3. Añadir el usuario por defecto (ubuntu) al grupo docker para evitar usar sudo\n# El usuario en la imagen de Ubuntu en OCI suele ser 'ubuntu' o el que uses.\n# Asumo 'ubuntu'\nif id -u ubuntu \u003e/dev/null 2\u003e\u00261; then\n    sudo usermod -aG docker ubuntu\nelse\n    # Si el usuario es distinto, identifica al usuario principal de la instancia.\n    echo \"Usuario 'ubuntu' no encontrado, ajusta el script si usas otro usuario.\"\nfi\n\n# 4. Habilitar y arrancar el servicio Docker\nsudo systemctl enable docker\nsudo systemctl start docker\n\necho \"Docker y Docker Compose (plugin) instalados y listos.\"",
            "template": "#!/bin/bash\n# Script de cloud-init para instalar Docker y Docker Compose en Ubuntu 22.04\n\n# 1. Actualizar paquetes\nsudo apt-get update -y\n\n# 2. Instalar Docker\nsudo apt-get install -y ca-certificates curl gnupg lsb-release\nsudo mkdir -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\nsudo chmod a+r /etc/apt/keyrings/docker.gpg\n\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list \u003e /dev/null\n\nsudo apt-get update -y\nsudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# 3. Añadir el usuario por defecto (ubuntu) al grupo docker para evitar usar sudo\n# El usuario en la imagen de Ubuntu en OCI suele ser 'ubuntu' o el que uses.\n# Asumo 'ubuntu'\nif id -u ubuntu \u003e/dev/null 2\u003e\u00261; then\n    sudo usermod -aG docker ubuntu\nelse\n    # Si el usuario es distinto, identifica al usuario principal de la instancia.\n    echo \"Usuario 'ubuntu' no encontrado, ajusta el script si usas otro usuario.\"\nfi\n\n# 4. Habilitar y arrancar el servicio Docker\nsudo systemctl enable docker\nsudo systemctl start docker\n\necho \"Docker y Docker Compose (plugin) instalados y listos.\"",
            "vars": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_instance",
      "name": "Ubuntu_vm",
      "provider": "provider[\"registry.terraform.io/oracle/oci\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "agent_config": [
              {
                "are_all_plugins_disabled": false,
                "is_management_disabled": false,
                "is_monitoring_disabled": false,
                "plugins_config": []
              }
            ],
            "async": null,
            "availability_config": [
              {
                "is_live_migration_preferred": false,
                "recovery_action": "RESTORE_INSTANCE"
              }
            ],
            "availability_domain": "cDDe:SA-SAOPAULO-1-AD-1",
            "boot_volume_id": "ocid1.bootvolume.oc1.sa-saopaulo-1.abtxeljrt2lk5vpc6s6kbianyhylchdpojjas4l2a56ezsbao35kte5vorla",
            "capacity_reservation_id": null,
            "cluster_placement_group_id": null,
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaaxm7l6tvvt4djju5qkyylipzkxioltwzqiv2hyt7rvwoy3l2hfv7a",
            "compute_cluster_id": null,
            "create_vnic_details": [
              {
                "assign_ipv6ip": false,
                "assign_private_dns_record": false,
                "assign_public_ip": "true",
                "defined_tags": {
                  "Oracle-Tags.CreatedBy": "default/vni3005757@est.univalle.edu",
                  "Oracle-Tags.CreatedOn": "2025-11-04T03:26:38.117Z"
                },
                "display_name": "ubuntu-docker-vm-vnic",
                "freeform_tags": {},
                "hostname_label": "ubuntu-docker-vm",
                "ipv6address_ipv6subnet_cidr_pair_details": [],
                "nsg_ids": [],
                "private_ip": "10.0.0.57",
                "skip_source_dest_check": false,
                "subnet_id": "ocid1.subnet.oc1.sa-saopaulo-1.aaaaaaaaq3j5cftnyolcyt576htw5h5imgsek24fdwerlrshvpaqciftjibq",
                "vlan_id": ""
              }
            ],
            "dedicated_vm_host_id": null,
            "defined_tags": {
              "Oracle-Tags.CreatedBy": "default/vni3005757@est.univalle.edu",
              "Oracle-Tags.CreatedOn": "2025-11-04T03:26:37.912Z"
            },
            "display_name": "ubuntu-docker-vm",
            "extended_metadata": {},
            "fault_domain": "FAULT-DOMAIN-3",
            "freeform_tags": {},
            "hostname_label": "ubuntu-docker-vm",
            "id": "ocid1.instance.oc1.sa-saopaulo-1.antxeljrbixeesqcmibzatbjeps33fgjxnnndmaanrwcngnaihoete3yorrq",
            "image": "ocid1.image.oc1.sa-saopaulo-1.aaaaaaaapi57wbgrd2xz5pppt2omxiwdp4su2jpv5gwlmxo2abkulz2oqh7a",
            "instance_configuration_id": null,
            "instance_options": [
              {
                "are_legacy_imds_endpoints_disabled": false
              }
            ],
            "ipxe_script": null,
            "is_cross_numa_node": false,
            "is_pv_encryption_in_transit_enabled": null,
            "launch_mode": "PARAVIRTUALIZED",
            "launch_options": [
              {
                "boot_volume_type": "PARAVIRTUALIZED",
                "firmware": "UEFI_64",
                "is_consistent_volume_naming_enabled": true,
                "is_pv_encryption_in_transit_enabled": false,
                "network_type": "PARAVIRTUALIZED",
                "remote_data_volume_type": "PARAVIRTUALIZED"
              }
            ],
            "launch_volume_attachments": null,
            "metadata": {
              "ssh_authorized_keys": "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIIkjmNSjwb+EOuzkjrQ/Xe/rGYoYh9cEq8yJwQyp9JWu usuario@GABRIEL",
              "user_data": "IyEvYmluL2Jhc2gKIyBTY3JpcHQgZGUgY2xvdWQtaW5pdCBwYXJhIGluc3RhbGFyIERvY2tlciB5IERvY2tlciBDb21wb3NlIGVuIFVidW50dSAyMi4wNAoKIyAxLiBBY3R1YWxpemFyIHBhcXVldGVzCnN1ZG8gYXB0LWdldCB1cGRhdGUgLXkKCiMgMi4gSW5zdGFsYXIgRG9ja2VyCnN1ZG8gYXB0LWdldCBpbnN0YWxsIC15IGNhLWNlcnRpZmljYXRlcyBjdXJsIGdudXBnIGxzYi1yZWxlYXNlCnN1ZG8gbWtkaXIgLXAgL2V0Yy9hcHQva2V5cmluZ3MKY3VybCAtZnNTTCBodHRwczovL2Rvd25sb2FkLmRvY2tlci5jb20vbGludXgvdWJ1bnR1L2dwZyB8IHN1ZG8gZ3BnIC0tZGVhcm1vciAtbyAvZXRjL2FwdC9rZXlyaW5ncy9kb2NrZXIuZ3BnCnN1ZG8gY2htb2QgYStyIC9ldGMvYXB0L2tleXJpbmdzL2RvY2tlci5ncGcKCmVjaG8gXAogICJkZWIgW2FyY2g9JChkcGtnIC0tcHJpbnQtYXJjaGl0ZWN0dXJlKSBzaWduZWQtYnk9L2V0Yy9hcHQva2V5cmluZ3MvZG9ja2VyLmdwZ10gaHR0cHM6Ly9kb3dubG9hZC5kb2NrZXIuY29tL2xpbnV4L3VidW50dSBcCiAgJChsc2JfcmVsZWFzZSAtY3MpIHN0YWJsZSIgfCBzdWRvIHRlZSAvZXRjL2FwdC9zb3VyY2VzLmxpc3QuZC9kb2NrZXIubGlzdCA+IC9kZXYvbnVsbAoKc3VkbyBhcHQtZ2V0IHVwZGF0ZSAteQpzdWRvIGFwdC1nZXQgaW5zdGFsbCAteSBkb2NrZXItY2UgZG9ja2VyLWNlLWNsaSBjb250YWluZXJkLmlvIGRvY2tlci1idWlsZHgtcGx1Z2luIGRvY2tlci1jb21wb3NlLXBsdWdpbgoKIyAzLiBBw7FhZGlyIGVsIHVzdWFyaW8gcG9yIGRlZmVjdG8gKHVidW50dSkgYWwgZ3J1cG8gZG9ja2VyIHBhcmEgZXZpdGFyIHVzYXIgc3VkbwojIEVsIHVzdWFyaW8gZW4gbGEgaW1hZ2VuIGRlIFVidW50dSBlbiBPQ0kgc3VlbGUgc2VyICd1YnVudHUnIG8gZWwgcXVlIHVzZXMuCiMgQXN1bW8gJ3VidW50dScKaWYgaWQgLXUgdWJ1bnR1ID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgc3VkbyB1c2VybW9kIC1hRyBkb2NrZXIgdWJ1bnR1CmVsc2UKICAgICMgU2kgZWwgdXN1YXJpbyBlcyBkaXN0aW50bywgaWRlbnRpZmljYSBhbCB1c3VhcmlvIHByaW5jaXBhbCBkZSBsYSBpbnN0YW5jaWEuCiAgICBlY2hvICJVc3VhcmlvICd1YnVudHUnIG5vIGVuY29udHJhZG8sIGFqdXN0YSBlbCBzY3JpcHQgc2kgdXNhcyBvdHJvIHVzdWFyaW8uIgpmaQoKIyA0LiBIYWJpbGl0YXIgeSBhcnJhbmNhciBlbCBzZXJ2aWNpbyBEb2NrZXIKc3VkbyBzeXN0ZW1jdGwgZW5hYmxlIGRvY2tlcgpzdWRvIHN5c3RlbWN0bCBzdGFydCBkb2NrZXIKCmVjaG8gIkRvY2tlciB5IERvY2tlciBDb21wb3NlIChwbHVnaW4pIGluc3RhbGFkb3MgeSBsaXN0b3MuIg=="
            },
            "platform_config": [],
            "preemptible_instance_config": [],
            "preserve_boot_volume": null,
            "preserve_data_volumes_created_at_launch": null,
            "private_ip": "10.0.0.57",
            "public_ip": "163.176.193.230",
            "region": "sa-saopaulo-1",
            "shape": "VM.Standard.E2.1.Micro",
            "shape_config": [
              {
                "baseline_ocpu_utilization": "",
                "gpu_description": "",
                "gpus": 0,
                "local_disk_description": "",
                "local_disks": 0,
                "local_disks_total_size_in_gbs": 0,
                "max_vnic_attachments": 1,
                "memory_in_gbs": 1,
                "networking_bandwidth_in_gbps": 0.47999998927116394,
                "nvmes": 0,
                "ocpus": 1,
                "processor_description": "2.0 GHz AMD EPYC™ 7551 (Naples)",
                "vcpus": 2
              }
            ],
            "source_details": [
              {
                "boot_volume_size_in_gbs": "47",
                "boot_volume_vpus_per_gb": "10",
                "instance_source_image_filter_details": [],
                "is_preserve_boot_volume_enabled": false,
                "kms_key_id": "",
                "source_id": "ocid1.image.oc1.sa-saopaulo-1.aaaaaaaapi57wbgrd2xz5pppt2omxiwdp4su2jpv5gwlmxo2abkulz2oqh7a",
                "source_type": "image"
              }
            ],
            "state": "RUNNING",
            "subnet_id": "ocid1.subnet.oc1.sa-saopaulo-1.aaaaaaaaq3j5cftnyolcyt576htw5h5imgsek24fdwerlrshvpaqciftjibq",
            "system_tags": {
              "orcl-cloud.free-tier-retained": "true"
            },
            "time_created": "2025-11-04 03:26:38.517 +0000 UTC",
            "time_maintenance_reboot_due": "",
            "timeouts": null,
            "update_operation_constraint": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoyNzAwMDAwMDAwMDAwLCJkZWxldGUiOjQ1MDAwMDAwMDAwMDAsInVwZGF0ZSI6MjcwMDAwMDAwMDAwMH19",
          "dependencies": [
            "data.template_file.cloud_init_script"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
